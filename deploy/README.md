# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ deploy

- `nginx/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
- `README.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏ –∫–æ–Ω—Ñ–∏–≥ —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥–æ–º–µ–Ω–æ–º

–û—Ç–∫—Ä–æ–π `deploy/nginx/shkila.conf` –∏ –∑–∞–º–µ–Ω–∏ `YOUR_DOMAIN.ru` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `flare-school.ru`).

### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@5.129.223.109

# –°–∫–æ–ø–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥ (–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
cp /var/www/shkila/deploy/nginx/shkila.conf /etc/nginx/sites-available/shkila

# –ò–ª–∏ –µ—Å–ª–∏ –∫–æ–ø–∏—Ä—É–µ—à—å —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã:
# scp deploy/nginx/shkila.conf root@5.129.223.109:/etc/nginx/sites-available/shkila
```

### –®–∞–≥ 3: –£–±–µ–¥–∏—Å—å —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥ –∞–∫—Ç–∏–≤–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–∏–º–ª–∏–Ω–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la /etc/nginx/sites-enabled/shkila

# –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π
ln -s /etc/nginx/sites-available/shkila /etc/nginx/sites-enabled/shkila

# –£–±–µ—Ä–∏ default –µ—Å–ª–∏ –æ–Ω –º–µ—à–∞–µ—Ç
rm /etc/nginx/sites-enabled/default
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ nginx

```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏
systemctl reload nginx
```

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ALLOWED_HOSTS –≤ Django

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞, –æ–±–Ω–æ–≤–∏ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
nano /var/www/shkila/back/school/.env
```

–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É `ALLOWED_HOSTS` –∏ –¥–æ–±–∞–≤—å –¥–æ–º–µ–Ω:

```
ALLOWED_HOSTS=YOUR_DOMAIN.ru,www.YOUR_DOMAIN.ru,5.129.223.109,localhost,127.0.0.1
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Gunicorn:

```bash
systemctl restart shkila
```

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

–£ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π A-–∑–∞–ø–∏—Å–∏:

- `@` ‚Üí `5.129.223.109`
- `www` ‚Üí `5.129.223.109`

–ü–æ–¥–æ–∂–¥–∏ 5-15 –º–∏–Ω—É—Ç –ø–æ–∫–∞ DNS –æ–±–Ω–æ–≤–∏—Ç—Å—è.

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π `http://YOUR_DOMAIN.ru` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ—Ä–æ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ª–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å –≤ DevTools ‚Üí Network —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ `/api/...`
